<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SocialMedia &amp; Product Registry Landing Page</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/master.css" rel="stylesheet" />
    <link href="font-awesome-4.2.0/" rel="icon" />
    <link href="css/social-buttons.css" rel="icon" />
    <link href="css/bootstrap-theme.css" rel="icon" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    
  <div class="container">
    <div class="row">
      <!-- Nav tabs -->
      <h1>Featured Items (Using Galleries!)</h1>
      <div class="col-sm-12">
        <form class="form-group row">
          <div class="col-sm-2">
            <label>Gallery ID</label>
            <input class="form-control" id="gallery" value="2"></input>
          </div>
          <div class="col-sm-2">
            <label>Reload</label><br/>
            <button type="submit" class="btn btn-default">Submit</button>
          </div>
        </form>
      </div>
    <div>
    <div class="row">
      <div class="col-md-4 column">
        <div class="latestPostsContainer">
          <h4>Featured Mobile Products</h4>
          <div id="media-collection">

          </div>
        </div>
      </div>
      <div class="col-md-8">
        <div class="well">
        <pre>
&lt;!-- jQuery (necessary for Bootstrap's JavaScript plugins) --&gt;
&lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;lib/handlebars-2.0.0.js&quot;&gt;&lt;/script&gt;
&lt;div id=&quot;media-collection&quot;&gt;

&lt;/div&gt;
&lt;script id=&quot;mobile-app-template&quot; type=&quot;text/x-handlebars-template&quot;&gt;
  &lt;div class=&quot;media&quot;&gt;
    {{#if icon_url}}
    &lt;a href=&quot;#&quot; class=&quot;pull-left&quot;&gt;
      &lt;img src=&quot;{{icon_url}}&quot; class=&quot;media-object img-rounded&quot; alt='' /&gt;
    &lt;/a&gt;
    {{/if}}
    &lt;div class=&quot;media-body text-overflow&quot;&gt;
      &lt;h4 class=&quot;media-heading&quot;&gt;{{name}}&lt;/h4&gt; 
      {{short_description}}
      &lt;ul&gt;
        {{#each versions}}
        &lt;a href=&quot;{{store_url}}&quot;&gt;{{platform}}&lt;/a&gt;
        {{/each}}
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;

&lt;script id=&quot;social-media-template&quot; type=&quot;text/x-handlebars-template&quot;&gt;
  &lt;div class=&quot;media&quot;&gt;
    &lt;div class=&quot;media-body text-overflow&quot;&gt;
      &lt;a href=&quot;{{service_url}}&quot;&gt;&lt;h4 class=&quot;media-heading&quot;&gt;
      {{#if organization}}
        {{organization}}
      {{else}}
        {{service_display_name}}
      {{/if}}
      &lt;/h4&gt;&lt;/a&gt;
      {{#each agencies}}
        {{name}}
      {{/each}}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;

&lt;script&gt;
  $(document).ready(function(){
    var source   = $(&quot;#mobile-app-template&quot;).html();
    var mobile_template = Handlebars.compile(source); 
    source   = $(&quot;#social-media-template&quot;).html();
    var social_media_template = Handlebars.compile(source); 

    function load_gallery(gallery_id){
      $.get(&quot;http://localhost:3000/api/v1/galleries/&quot;+gallery_id+&quot;.json&quot;,function(data){
        if(data){
          $('#media-collection').empty();
          for(var i=0;i&lt;data.gallery_items.length;i++){
            if(data.gallery_items[i].type.indexOf(&quot;Social Media&quot;)==0){
              $('#media-collection').append(social_media_template(data.gallery_items[i]));
            }else{
              $('#media-collection').append(mobile_template(data.gallery_items[i]));
            }
          }
        }
      })
    }
    $('form').submit(function(e){
      e.preventDefault();
      load_gallery($('#gallery').val());
    })
    load_gallery($('#gallery').val())
  });
&lt;/script&gt;
        </pre>
        </div>
      </div>
    </div>
  </div>
      
  <script id="mobile-app-template" type="text/x-handlebars-template">
    <div class="media">
      {{#if icon_url}}
      <a href="#" class="pull-left">
        <img src="{{icon_url}}" class="media-object img-rounded" style="height: 64px; width:64px" alt='' />
      </a>
      {{/if}}
      <div class="media-body text-overflow">
        <h4 class="media-heading">{{name}}</h4> 
        {{short_description}}
        <ul>
          {{#each versions}}
          <a href="{{store_url}}">{{platform}}</a>
          {{/each}}
        </ul>
      </div>
    </div>
  </script>

  <script id="social-media-template" type="text/x-handlebars-template">
    <div class="media">
      <div class="media-body text-overflow">
        <a href="{{service_url}}"><h4 class="media-heading">
        {{#if organization}}
          {{organization}}
        {{else}}
          {{service_display_name}}
        {{/if}}
        </h4></a>
        {{#each agencies}}
          {{name}}
        {{/each}}
      </div>
    </div>
  </script>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="lib/bootstrap.min.js"></script>
  <script src="lib/handlebars-2.0.0.js"></script>

  <script>
    $(document).ready(function(){
      var source   = $("#mobile-app-template").html();
      var mobile_template = Handlebars.compile(source); 
      source   = $("#social-media-template").html();
      var social_media_template = Handlebars.compile(source); 

      function load_gallery(gallery_id){
        $.get("http://localhost:3000/api/v1/galleries/"+gallery_id+".json",function(data){
          if(data){
            $('#media-collection').empty();
            for(var i=0;i<data.gallery_items.length;i++){
              if(data.gallery_items[i].type.indexOf("Social Media")==0){
                $('#media-collection').append(social_media_template(data.gallery_items[i]));
              }else{
                $('#media-collection').append(mobile_template(data.gallery_items[i]));
              }
            }
          }
        })
      }
      $('form').submit(function(e){
        e.preventDefault();
        load_gallery($('#gallery').val());
      })
      load_gallery($('#gallery').val())
    });
  </script>
  </body>
</html>